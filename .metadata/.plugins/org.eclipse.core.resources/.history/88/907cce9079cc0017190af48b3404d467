package com.wwq.hibernate;

import java.util.List;

import org.hibernate.Query;
import org.hibernate.Session;
import org.hibernate.Transaction;

import com.hibernate.entity.Person;
import com.wwq.hibernate.util.HibernateSessionFactory;

public class HQLTestTwo {
	public static void main(String[] args) {
		Session session = HibernateSessionFactory.getSession();
		// ？
		// String
		// hql="select a from com.hibernate.entity.Person as a where id =?????????";
		// 占位符可以取别名
		// String
		// hql="select a from com.hibernate.entity.Person as a where id =:id";
		// Query query = session.createQuery(hql);
		// query.setInteger("id", 16);
		// Person o=(Person)query.uniqueResult();
		// System.out.print(o.getName()+"\t"+o.getRole()+"\t"+o.getSex());
		// String hql = "from Person";
		// String hql="select a from Person as a where name =:name";
		// String hql="select a from Person as a where name=:name or sex=:sex";
		// String hql ="delete from Person as p where p.name like:bieming";
		// Query query = session.createQuery(hql);
		// query.setString("bieming", "a");
		// int a= query.executeUpdate();
		// System.out.print(a);
		// session.beginTransaction().commit();
		// 函数的处理

//		String hql = "select avg(a.id) from Person as a";
		//todo
//		String hql ="select min(a.id),max(a.id) from Person as a";
//		Query query = session.createQuery(hql);
//		List list=query.list();
//		for (int i = 0; i < list.size(); i++) {
//			Integer j = (Integer)list.get(i);
//			System.out.print(j);
//		}
//		String hql =" from Person as a order by a.id desc";
//		Query query = session.createQuery(hql);
//		List list=query.list();
//		for (int i = 0; i < list.size(); i++) {
//			Person j = (Person)list.get(i);
//			System.out.print(j.getId());
//		}
		//子查询
		String hql ="from Person as a where a.id<(select max(b.id) from Person as b )";
		Query query = session.createQuery(hql);
		List list=query.list();
		for (int i = 0; i < list.size(); i++) {
			Person j = (Person)list.get(i);
			System.out.print(j.getId());
		}
	}
}
