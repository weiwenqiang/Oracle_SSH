package com.wwq.hibernate;

import org.hibernate.Query;
import org.hibernate.Session;
import org.hibernate.Transaction;

import com.wwq.hibernate.util.HibernateSessionFactory;

public class HQLTestOne {
	public static void main(String[] args) {
		Session session = HibernateSessionFactory.getSession();
		// ？
		// String
		// hql="select a from com.hibernate.entity.Person as a where id =?????????";
		// 占位符可以取别名
		// String
		// hql="select a from com.hibernate.entity.Person as a where id =:id";
		// Query query = session.createQuery(hql);
		// query.setInteger("id", 16);
		// Person o=(Person)query.uniqueResult();
		// System.out.print(o.getName()+"\t"+o.getRole()+"\t"+o.getSex());
//		String hql = "from Person";
//		String hql="select a from Person as a where name =:name";
//		String hql="select a from Person as a where name=:name or sex=:sex";
//		Query query = session.createQuery(hql);
//		query.setString("name", "a");
//		query.setString("sex", "unknow");
//		List list = query.list();
//		for (int i = 0; i < list.size(); i++) {
//			Person p = (Person) list.get(i);
//			System.out.print(p.getId()+p.getSex() +p.getRole()+ "\r");
//		}
		Transaction tx = null;
		tx = session .beginTransaction();
		
		try {
//			String hql="update Person as a set a.name=:name where a.id =:id";
			String hql="delete from Person where id=:id";
			Query query = session.createQuery(hql);
//			query.setString("name","def");
			query.setInteger("id", 12);
			int a = query.executeUpdate();
			System.out.print(a);//1
			tx.commit();
		} catch (Exception e) {
			tx.rollback();
			e.printStackTrace();
		}

	}
}
